<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2>
        
        </h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        <dl>
            
<dt>
    
        

        <h4 class="name" id="add_friend"><span class="type-signature"></span>add_friend<span class="signature">()</span><span class="type-signature"></span></h4>

        
    
</dt>
<dd>

    
    <div class="description">
        Fonction qui prend en paramètre le PSEUDO à ajouter, l'id du client, et la réponse à envoyer au client.
Tout d'abord, on cherche si un document existe avec l'id en question. Si il n'existe pas on renvoie "add_frien_ko_id_not_found".
Si l'utilisateur existe bien:
	le pseudo de l'ami à ajouter est-t-il le même que celui qui ajoute ?
	- oui : on renvoie "add_friend_ko_adding_yourself" car il ne peut pas s'ajouter lui même
	- non : l'utilisateur qui ajoute a-t-il déjà des amis?
		- non : on ajoute l'ami dans la friend list de l'utilisateur et on renvoie "add_frien_ok"
		- oui : l'ami ajouté est-il déjà présent dans la liste d'ami ?
			- non : on ajoute l'ami dans la friend list de l'utilisateur et on renvoie "add_frien_ok"
			- oui : on renvoie "add_friend_ko_already_friend"
    </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="db2.js.html">db2.js</a>, <a href="db2.js.html#line256">line 256</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    

    
</dd>

        
            
<dt>
    
        

        <h4 class="name" id="delete_"><span class="type-signature"></span>delete_<span class="signature">()</span><span class="type-signature"></span></h4>

        
    
</dt>
<dd>

    
    <div class="description">
        La fonction prend en paramètre l'id du client, le password envoyé par le client, et la réponse à transmettre au client.
Dans la collection "users", on recherche un document qui matche avec l'id ET le password envoyé.
Si un document est trouvé <=> doc = 1 : cela signifie que la suppression a eu lieu
Sinon, cela signifie que le client a envoyé un mauvais id ou un mauvais password associé à l'id
    </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="db2.js.html">db2.js</a>, <a href="db2.js.html#line112">line 112</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    

    
</dd>

        
            
<dt>
    
        

        <h4 class="name" id="delete_friend"><span class="type-signature"></span>delete_friend<span class="signature">()</span><span class="type-signature"></span></h4>

        
    
</dt>
<dd>

    
    <div class="description">
        La fonction prend en paramètre le pseudo de l'ami à supprimer, l'id du client, et la réponse à envoyer.
Dans la collection "users", on cherche d'abord si l'id match avec un document. Sinon, on renvoie "id_not_found".
L'utilisateur a-t-il une friendList ?
	- non : on renvoie "delete_friend_none_friend"
	- oui : l'ami a supprimer est-il présent dans la friendList?
		- non : on renvoie "delete_friend_ko_no_such_friend"
		- oui : on met à jour le document avec le tableau sans l'ami et on renvoie "delete_friend_ok"
    </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="db2.js.html">db2.js</a>, <a href="db2.js.html#line361">line 361</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    

    
</dd>

        
            
<dt>
    
        

        <h4 class="name" id="get_friends"><span class="type-signature"></span>get_friends<span class="signature">()</span><span class="type-signature"></span></h4>

        
    
</dt>
<dd>

    
    <div class="description">
        La fonction prend en paramètres l'id du client, et la réponse à envoyer au client.
On recherche dans la collection "users" le document correspondant à l'id du client.
Si il y a un match: le champs friendList existe-t-il?
	- oui : on renvoie le tableau d'amis au client
	- non : on indique que l'utilisateur n'a pas d'amis

Attention, côté client peut recevoir un tableau d'amis vide, donc une condition doit être faite côté client
    </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="db2.js.html">db2.js</a>, <a href="db2.js.html#line320">line 320</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    

    
</dd>

        
            
<dt>
    
        

        <h4 class="name" id="get_info"><span class="type-signature"></span>get_info<span class="signature">()</span><span class="type-signature"></span></h4>

        
    
</dt>
<dd>

    
    <div class="description">
        La fonction prend en paramètre l'id du client, et la réponse à transmettre au client.
Dans la collection users, on recherche un document qui match avec l'id.
Si un document est trouvé, grace à une boucle foreach, on va rechercher dans cette même collection
tous les documents correspondant au différents username présent dans le champs friendliste (un tableau de string)
de la précédente recherche. On stocke à chaque "tour de boucle" (PAS VRAIMENT CA POUR UN FOREACH)
le pseudo de chacun de ses amis dans un tableau.
On renvoie alors le tableau au client.
    </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="db2.js.html">db2.js</a>, <a href="db2.js.html#line152">line 152</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    

    
</dd>

        
            
<dt>
    
        

        <h4 class="name" id="login"><span class="type-signature"></span>login<span class="signature">()</span><span class="type-signature"></span></h4>

        
    
</dt>
<dd>

    
    <div class="description">
        La fonction login prend en paramètre l'username, le password et la réponse.
Si un document dans la collection "users" match avec l'username et le password, alors:
 - il met à jour le champs "connected" à 1;
 - on transmet l'objet avec l'id unique au client;
Sinon on renvoie "login_ko" pour dire que les informations entrées ne correspondent à aucun document.
    </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="db2.js.html">db2.js</a>, <a href="db2.js.html#line11">line 11</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    

    
</dd>

        
            
<dt>
    
        

        <h4 class="name" id="logout"><span class="type-signature"></span>logout<span class="signature">()</span><span class="type-signature"></span></h4>

        
    
</dt>
<dd>

    
    <div class="description">
        La fonction prend en comptre un id (envoyé par le client) et une réponse à envoyé au client.
On met à jour, dans la collection "users", le document qui match avec l'id correspondant en attribuant 0 au champs connected.
Si aucun document ne correspond à l'id, cela renvoie un message d'erreur.
    </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="db2.js.html">db2.js</a>, <a href="db2.js.html#line82">line 82</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    

    
</dd>

        
            
<dt>
    
        

        <h4 class="name" id="register"><span class="type-signature"></span>register<span class="signature">()</span><span class="type-signature"></span></h4>

        
    
</dt>
<dd>

    
    <div class="description">
        La fonction register prend en paramètres un username, un password, et une réponse à transmettre au client.
Dans la collection "users", on insère un document composé des champs suivant :
	- username: username entré mis en minuscule, ainsi quand le user veut se connecter, il peut entrer avec ou sans majuscule.
		De plus, cela permet de voir si deux username ne sont pas les mêmes ("RoMaIn" et "romain" serait insérer également, ce que l'on ne veut pas)
	- pseudo: username entré qui peut être en majuscule ou minuscule. Il sert  a conservé la casse de l'username
	- password: password entré
La fonction retourne juste le message "register_ok" si le document s'est bien insérer.
Si le document ne s'est pas insérer, cela signifie qu'il y a un doublon de l'username. En effet, un index est présent sur le champ
username, afin qu'il n'y ait pas plusieurs utilisateurs avec le même nom.
    </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="db2.js.html">db2.js</a>, <a href="db2.js.html#line52">line 52</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    

    
</dd>

        
            
<dt>
    
        

        <h4 class="name" id="set_info"><span class="type-signature"></span>set_info<span class="signature">()</span><span class="type-signature"></span></h4>

        
    
</dt>
<dd>

    
    <div class="description">
        La fonction prend en paramètre le status que l'user veut publier, l'id du client, et la réponse à transmettre au client.
Dans la collection users, on recherche un document qui match avec l'id.
Si un document est trouvé :
	- Le champs status est mis a jour ou ajouté avec le status que l'user a rentré
On renvoie ensuite un message au client : "status_update".
    </div>
    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="db2.js.html">db2.js</a>, <a href="db2.js.html#line219">line 219</a>
    </li></ul></dd>
    

    

    

    
</dl>


    

    

    

    

    

    

    
</dd>

        </dl>
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#add_friend">add_friend</a></li><li><a href="global.html#delete_">delete_</a></li><li><a href="global.html#delete_friend">delete_friend</a></li><li><a href="global.html#get_friends">get_friends</a></li><li><a href="global.html#get_info">get_info</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#register">register</a></li><li><a href="global.html#set_info">set_info</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Fri Nov 21 2014 22:49:16 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>